> í´ë¡œì €ëŠ” í•¨ìˆ˜ì™€ ê·¸ í•¨ìˆ˜ê°€ ì„ ì–¸ëì„ ë•Œì˜ ë ‰ì‹œì»¬ í™˜ê²½(Lexical environment)ê³¼ì˜ ì¡°í•©ì´ë‹¤.

### âœï¸Â ë ‰ì‹œì»¬ ìŠ¤ì½”í”„

ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ í•¨ìˆ˜ë¥¼ ì–´ë””ì„œ í˜¸ì¶œí•˜ëŠ”ì§€ê°€ ì•„ë‹ˆë¼ ì–´ë””ì— ì •ì˜í–ˆëŠ”ì§€ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ê°€ ê²°ì •ëœë‹¤.

ê°ì²´ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì— ìƒìœ„ ìŠ¤ì½”í”„ê°€ ê²°ì •ë˜ê³  `[[Environment]]` ë‚´ë¶€ ìŠ¬ë¡¯ì— ì €ì¥í•œë‹¤. ì´í›„ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê³  í•¨ìˆ˜ ëª¸ì²´ ì½”ë“œê°€ í‰ê°€ë˜ëŠ” ì‹œì ì— ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì— ëŒ€í•œ ì°¸ì¡°ì— ê°ì²´ê°€ ìƒì„±ë  ë•Œ ì €ì¥í•œ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì°¸ì¡°ê°’ì„ ì €ì¥í•œë‹¤.

### âœï¸Â í•¨ìˆ˜ ê°ì²´ì˜ ë‚´ë¶€ ìŠ¬ë¡¯ `[[Environment]]`

í•¨ìˆ˜ê°€ ì •ì˜ëœ í™˜ê²½ê³¼ í˜¸ì¶œë˜ëŠ” í™˜ê²½ì´ ë‹¤ë¥¼ ìˆ˜ ìˆê³  ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ê°€ ê°€ëŠ¥í•˜ë ¤ë©´ í•¨ìˆ˜ëŠ” ìì‹ ì´ í˜¸ì¶œë˜ëŠ” í™˜ê²½ê³¼ ìƒê´€ì—†ì´ ìì‹ ì´ ì •ì˜ëœ í™˜ê²½(ìƒìœ„ ìŠ¤ì½”í”„)ì„ ê¸°ì–µí•´ì•¼ í•œë‹¤. **í•¨ìˆ˜ëŠ” ìì‹ ì˜ ë‚´ë¶€ ìŠ¬ë¡¯** `[[Environment]]`**ì— ìì‹ ì´ ì •ì˜ëœ í™˜ê²½(ìƒìœ„ ìŠ¤ì½”í”„)ì˜ ì°¸ì¡°ë¥¼ ì €ì¥í•œë‹¤.**

**í•¨ìˆ˜ ê°ì²´ì˜ ë‚´ë¶€ ìŠ¬ë¡¯** `[[Environment]]`**ì— ì €ì¥ëœ ì‹¤í–‰ ì¤‘ì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì˜ ì°¸ì¡°, ìì‹ ì´ í˜¸ì¶œë˜ì—ˆì„ ë•Œ ìƒì„±ë  í•¨ìˆ˜ ë ‰ì‹œì»¬ í™˜ê²½ì˜ â€˜ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì— ëŒ€í•œ ì°¸ì¡°â€™ì— ì €ì¥ë  ì°¸ì¡°ê°’ì´ ìƒìœ„ ìŠ¤ì½”í”„ë‹¤.**

```jsx
const x = 10;

function foo() {
  const x = 20;
  // ìƒìœ„ ìŠ¤ì½”í”„ëŠ” í•¨ìˆ˜ ì •ì˜ í™˜ê²½ì— ë”°ë¼ ê²°ì •ëœë‹¤.
  bar();
}
// bar()ëŠ” ìì‹ ì˜ ìƒìœ„ ìŠ¤ì½®, ì „ì—­ ë ‰ì‹œì»¬ í™˜ê²½[[Environment]]ì— ì €ì¥í•˜ì—¬ ê¸°ì–µ
function bar() {
  console.log(x);
}
// í•¨ìˆ˜ í˜¸ì¶œ ìœ„ì¹˜ì™€ ì‚¬ìš°ì´ ìŠ¤ì½”í”„ëŠ” ê´€ê³„ê°€ ì—†ë‹¤.
foo(); // 10
bar(); // 10
```

### âœï¸Â í´ë¡œì €ì™€ ë ‰ì‹œì»¬ í™˜ê²½

```jsx
const x = 1;

// 1. outer() í•¨ìˆ˜ê°€ í‰ê°€ë˜ì–´ í•¨ìˆ˜ ê°ì²´ ìƒì„±
function outer() {
  const x = 10;
  // 2. inner() í‰ê°€: í•¨ìˆ˜ í‘œí˜„ì‹ìœ¼ë¡œ ì •ì˜ â†’ ëŸ°íƒ€ì„ ì‹œ í‰ê°€
  const inner = function () {
    console.log(x);
  };
  return inner;
}

// outer í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì¤‘ì²© í•¨ìˆ˜ innerë¥¼ ë°˜í™˜í•œë‹¤.
// ê·¸ë¦¬ê³  outer í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì—ì„œ íŒë˜ì–´ ì œê±°ëœë‹¤.
const innerFunc = outer(); // 3. outer() í˜¸ì¶œ: inner() ë°˜í™˜, ìƒëª…ì£¼ê¸° ë§ˆê°
innerFunc(); // 10 | 4. ìƒëª… ì£¼ê¸° ì¢…ë£Œ â†’ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì—ì„œ ì œê±°ëœ xê°€ ë™ì‘
```

ì™¸ë¶€ í•¨ìˆ˜ë³´ë‹¤ ì¤‘ì²© í•¨ìˆ˜ê°€ ë” ì˜¤ë˜ ìœ ì§€ë˜ëŠ” ê²½ìš° ì¤‘ì²© í•¨ìˆ˜ëŠ” ì´ë¯¸ ìƒëª… ì£¼ê¸°ê°€ ì¢…ë£Œí•œ ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ”ë° ì´ë¥¼ ì¤‘ì²© í•¨ìˆ˜ì˜ í´ë¡œì €ë¼ê³  ë¶€ë¥¸ë‹¤.

ëª¨ë“  í•¨ìˆ˜ê°€ ê¸°ì–µí•˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ëŠ” í•¨ìˆ˜ë¥¼ ì–´ë””ì„œ í˜¸ì¶œí•˜ë“  ìƒê´€ì—†ì´ ìœ ì§€ë˜ë©° í•¨ìˆ˜ë¥¼ ì–´ë””ì„œ í˜¸ì¶œí•˜ë“  ìƒê´€ì—†ì´ í•¨ìˆ˜ëŠ” ì–¸ì œë‚˜ ìì‹ ì´ ê¸°ì–µí•˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆê³  ì‹ë³„ìì— ë°”ì¸ë”©ëœ ê°’ì„ ë³€ê²½í•  ìˆ˜ë„ ìˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëª¨ë“  í•¨ìˆ˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê¸°ì–µí•˜ë¯€ë¡œ ì´ë¡ ì ìœ¼ë¡œ ëª¨ë“  í•¨ìˆ˜ëŠ” í´ë¡œì €ì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ ëª¨ë“  í•¨ìˆ˜ë¥¼ í´ë¡œì €ë¼ê³  í•˜ì§€ ì•ŠëŠ”ë‹¤.

**í´ë¡œì €ëŠ” ì¤‘ì²© í•¨ìˆ˜ê°€ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•˜ê³  ìˆê³  ì¤‘ì²© í•¨ìˆ˜ê°€ ì™¸ë¶€ í•¨ìˆ˜ë³´ë‹¤ ë” ì˜¤ë˜ ìœ ì§€ë˜ëŠ” ê²½ìš°ì— í•œì •í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.**

### âœï¸Â í´ë¡œì €ì˜ í™œìš©

í´ë¡œì €ëŠ” ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ê³  ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ì€ë‹‰í•˜ê³  íŠ¹ì • í•¨ìˆ˜ì—ê²Œë§Œ ìƒíƒœ ë³€ê²½ì„ í—ˆìš©í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

```jsx
// ì „ì—­ ë³€ìˆ˜ë¡œ ê´€ë¦¬
let num = 0;

// ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ê²½ í•¨ìˆ˜
const increase = function () {
  // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ 1ë§Œí¼ ì¦ê°€ ì‹œí‚¨ë‹¤.
  return ++num;
};

console.log(increase()); // 1
console.log(increase()); // 2
console.log(increase()); // 3
```

ì˜¤ë¥˜ ê°€ëŠ¥ì„±ì´ ìˆì–´ ì¢‹ì§€ ì•Šì€ ì½”ë“œ â†’ `num` ì „ì—­ ë³€ìˆ˜ì— ëˆ„êµ¬ë‚˜ ì ‘ê·¼í•˜ì—¬ ë³€ê²½ ê°€ëŠ¥í•¨

```jsx
// í•¨ìˆ˜ì˜ ì§€ì—­ ë³€ìˆ˜ë¡œ ê´€ë¦¬
const increase = function () {
  // ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ìˆ˜
  let num = 0;

  // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ 1ë§Œí¼ ì¦ê°€ ì‹œí‚¨ë‹¤.
  return ++num;
};

// ì´ì „ ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ëª»í•œë‹¤.
console.log(increase()); // 1
console.log(increase()); // 1
console.log(increase()); // 1
```

í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ `num`ì€ 0ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ê¸° ë•Œë¬¸ì— ì´ì „ ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ì—†ë‹¤.

```jsx
// í´ë¡œì € í™œìš©
const increase = (function () {
  // ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ìˆ˜
  let num = 0;

  // í´ë¡œì €
  return function () {
    // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ 1ë§Œí¼ ì¦ê°€ ì‹œí‚¨ë‹¤.
    return ++num;
  };
})();

console.log(increase()); // 1
console.log(increase()); // 2
console.log(increase()); // 3
```

í´ë¡œì €ëŠ” `num`ì˜ ìƒíƒœë¥¼ ì€ë‹‰í•˜ì—¬ ì˜ë„ì¹˜ ì•Šê²Œ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ê³  íŠ¹ì • í•¨ìˆ˜ì—ê²Œë§Œ ìƒíƒœ ë³€ê²½ì„ í—ˆìš©í•˜ì—¬ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ê³  ìœ ì§€í•œë‹¤.

```jsx
// ê°ì†Œ ê¸°ëŠ¥ ì¶”ê°€(í´ë¡œì €)
const counter = (function () {
  // ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ìˆ˜
  let num = 0;

  // í´ë¡œì €ì¸ ë©”ì„œë“œë¥¼ ê°–ëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
  // ê°ì²´ ë¦¬í„°ëŸ´ì€ ìŠ¤ì½”í”„ë¥¼ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤.
  // ë”°ë¼ì„œ ì•„ë˜ ë©”ì„œë“œë“¤ì˜ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì´ë‹¤.
  return {
    // num: 0, // í”„ë¡œí¼í‹°ëŠ” publicí•˜ë¯€ë¡œ ì€ë‹‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
    increase() {
      return ++num;
    },
    decrease() {
      return num > 0 ? --num : 0;
    },
  };
})();

console.log(counter.increase()); // 1
console.log(counter.increase()); // 2

console.log(counter.decrease()); // 1
console.log(counter.decrease()); // 0
```

```jsx
// ìƒì„±ì í•¨ìˆ˜ë¡œ í‘œí˜„(í´ë¡œì €)
const Counter = (function () {
  // â‘  ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ìˆ˜
  let num = 0;

  function Counter() {
    // this.num = 0; // â‘¡ í”„ë¡œí¼í‹°ëŠ” publicí•˜ë¯€ë¡œ ì€ë‹‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
  }

  Counter.prototype.increase = function () {
    return ++num;
  };

  Counter.prototype.decrease = function () {
    return num > 0 ? --num : 0;
  };

  return Counter;
})();

const counter = new Counter();

console.log(counter.increase()); // 1
console.log(counter.increase()); // 2

console.log(counter.decrease()); // 1
console.log(counter.decrease()); // 0
```

`num` ë³€ìˆ˜ì˜ ê°’ì€ `increase`, `decrease` ë©”ì„œë“œë§Œì´ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

```jsx
// ê³ ì°¨ í•¨ìˆ˜ í™œìš©í•œ í´ë¡œì €(í´ë¡œì €)
// ì´ í•¨ìˆ˜ëŠ” ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ììœ  ë³€ìˆ˜ counterë¥¼ ê¸°ì–µí•˜ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜í•œë‹¤.
const counter = (function () {
  // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ììœ  ë³€ìˆ˜
  let counter = 0;

  // í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜
  return function (aux) {
    // ì¸ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ë³´ì¡° í•¨ìˆ˜ì— ìƒíƒœ ë³€ê²½ì„ ìœ„ì„í•œë‹¤.
    counter = aux(counter);
    return counter;
  };
})();

// ë³´ì¡° í•¨ìˆ˜
function increase(n) {
  return ++n;
}

// ë³´ì¡° í•¨ìˆ˜
function decrease(n) {
  return --n;
}

// ë³´ì¡° í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ì—¬ í˜¸ì¶œ
console.log(counter(increase)); // 1
console.log(counter(increase)); // 2

// ììœ  ë³€ìˆ˜ë¥¼ ê³µìœ í•œë‹¤.
console.log(counter(decrease)); // 1
console.log(counter(decrease)); // 0
```

### âœï¸Â ìº¡ìŠí™”ì™€ ì •ë³´ ì€ë‹‰

ğŸªÂ **ìº¡ìŠí™”(encapsulation)**: ê°ì²´ì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” í”„ë¡œí¼í‹°ì™€ í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•˜ê³  ì¡°ì‘í•  ìˆ˜ ìˆëŠ” ë™ì‘ì¸ ë©”ì„œë“œë¥¼ í•˜ë‚˜ë¡œ ë¬¶ëŠ” ê²ƒì„ ë§í•œë‹¤.

ğŸªÂ **ì •ë³´ ì€ë‹‰(information hiding)**: ì™¸ë¶€ì— ê³µê°œí•  í•„ìš”ê°€ ì—†ëŠ” êµ¬í˜„ì˜ ì¼ë¶€ë¥¼ ì™¸ë¶€ì— ê³µê°œë˜ì§€ ì•Šë„ë¡ ê°ì¶”ì–´ ì ì ˆì¹˜ ëª»í•œ ì ‘ê·¼ìœ¼ë¡œë¶™ ê°ì²´ì˜ ìƒíƒœê°€ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë°©ì§€í•œë‹¤.

```jsx
// ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì—ì„œ ì§€ì—­ ë³€ìˆ˜ ì°¸ì¡°
function Person(name, age) {
  this.name = name; // public
  let _age = age; // private

  // ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ
  this.sayHi = function () {
    console.log(`Hi! My name is ${this.name}. I am ${_age}.`);
  };
}

const me = new Person('Lee', 20);
me.sayHi(); // Hi! My name is Lee. I am 20.
console.log(me.name); // Lee
console.log(me._age); // undefined

const you = new Person('Kim', 30);
you.sayHi(); // Hi! My name is Kim. I am 30.
console.log(you.name); // Kim
console.log(you._age); // undefined
```

```jsx
// í”„ë¡œí† íƒ€ì… ë©”ì„œë“œì—ì„œ ì§€ì—­ ë³€ìˆ˜ ì°¸ì¡°
function Person(name, age) {
  this.name = name; // public
  let _age = age; // private
}

// í”„ë¡œí† íƒ€ì… ë©”ì„œë“œ
Person.prototype.sayHi = function () {
  // Person ìƒì„±ì í•¨ìˆ˜ì˜ ì§€ì—­ ë³€ìˆ˜ _ageë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤
  console.log(`Hi! My name is ${this.name}. I am ${_age}.`);
};
```

`_age` ë³€ìˆ˜ëŠ” `Person` ìƒì„±ì í•¨ìˆ˜ì˜ ì§€ì—­ ë³€ìˆ˜ ì´ë¯€ë¡œ ì™¸ë¶€ì—ì„œ ì°¸ì¡°í•˜ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.

```jsx
// í”„ë¡œí† íƒ€ì… ë©”ì„œë“œë¥¼ í´ë¡œì €ë¡œ í™œìš©
const Person = (function () {
  let _age = 0; // private

  // ìƒì„±ì í•¨ìˆ˜
  function Person(name, age) {
    this.name = name; // public
    _age = age;
  }

  // í”„ë¡œí† íƒ€ì… ë©”ì„œë“œ
  Person.prototype.sayHi = function () {
    console.log(`Hi! My name is ${this.name}. I am ${_age}.`);
  };

  // ìƒì„±ì í•¨ìˆ˜ë¥¼ ë°˜í™˜
  return Person;
})();

const me = new Person('Lee', 20);
me.sayHi(); // Hi! My name is Lee. I am 20.
console.log(me.name); // Lee
console.log(me._age); // undefined

const you = new Person('Kim', 30);
you.sayHi(); // Hi! My name is Kim. I am 30.
console.log(you.name); // Kim
console.log(you._age); // undefined
```

`Person` ìƒì„±ì í•¨ìˆ˜ê°€ ì—¬ëŸ¬ ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ê²½ìš° `_age` ë³€ìˆ˜ì˜ ìƒíƒœê°€ ìœ ì§€ë˜ì§€ ì•ŠëŠ”ë‹¤
